<!DOCTYPE html>

<html>
<head>
    <title>II. 依赖 | harmy.me</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <link rel="icon" href=".././theme/img/favicon.png" />
    <link rel="stylesheet" href=".././theme/css/dmpayton.css" type="text/css" />
    <link href=".././feeds/all.rss.xml" type="application/atom+xml" rel="alternate" title="harmy.me" />

    <!--[if lt IE 9]><script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

</head>

<body class="page dependencies">

<div class="ribbon"> 
    <a href="https://github.com/harmy">Fork me on GitHub</a> 
</div> 

<div id="wrapper">
    <header id="header">
        <h1><a href="/">harmy</a></h1>
        <nav>
            <ul>
                <li><a href="/archives.html">Blog</a></li>
                <li><a href="/pages/projects.html">Projects</a></li>
                <li><a href="/pages/about.html">About</a></li>
                <!--<li><a href="/pages/resume.html">Résumé</a></li>-->
            </ul>
        </nav>
    </header>

    <!-- Grumble grumble... -->
    <div class="clear"></div>

    <div id="main">
        <div id="content" class="">
            
    
    <h1 class="title">II. 依赖</h1>
    
    <p><center><a href="http://www.harmy.me/pages/codebase.html">上一页：基准代码</a></center></p>
<h3>显式声明依赖关系(<em>dependency</em>)</h3>
<p>大多数编程语言都会提供一个打包系统，用来为各个类库提供打包服务，就像Perl的 <a href="http://www.cpan.org/">CPAN</a> 或是Ruby的 <a href="http://rubygems.org/">Rubygems</a> 。通过打包系统安装的类库可以是系统级的（称之为"site packages"），或仅供某个应用程序使用，部署在相应的目录中（称之为"vendoring"或"bunding"）。</p>
<p><strong>12-Factor规则下的应用程序不会隐式依赖系统级的类库。</strong> 它一定通过 <em>依赖清单</em> ，确切地声明所有依赖项。此外，在运行过程中通过 <em>依赖隔离</em> 工具来确保程序不会调用系统中存在但清单中未声明的依赖项。这一做法会统一应用到生产和开发环境。</p>
<p>例如， Ruby的<a href="http://gembundler.com/">Gem Bundler</a> 使用<code>Gemfile</code>作为依赖项声明清单，使用<code>bundle exec</code>来进行依赖隔离。Python中则可分别使用两种工具 -- <a href="http://www.pip-installer.org/en/latest/">Pip</a> 用作依赖声明， <a href="http://www.virtualenv.org/en/latest/">Virtualenv</a> 用作依赖隔离。甚至C语言也有类似工具， <a href="http://www.gnu.org/s/autoconf/">Autoconf</a> 用作依赖声明，静态链接库用作依赖隔离。无论用什么工具，依赖声明和依赖隔离必须一起使用，否则无法满足12-Factor规范。</p>
<p>显式声明依赖的优点之一是为新进开发者简化了环境配置流程。新进开发者可以检出应用程序的基准代码，安装编程语言环境和它对应的依赖管理工具，只需通过一个 <em>构建命令</em> 来安装所有的依赖项，即可开始工作。例如，Ruby/Bundler下使用<code>bundle install</code>，而Clojure/<a href="https://github.com/technomancy/leiningen#readme">Leiningen</a> 则是<code>lein deps</code>。</p>
<p>12-Factor应用同样不会隐式依赖某些系统工具，如ImageMagick或是<code>curl</code>。即使这些工具存在于几乎所有系统，但终究无法保证所有未来的系统都能支持应用顺利运行，或是能够和应用兼容。如果应用必须使用到某些系统工具，那么这些工具应该被包含在应用之中。</p>
<p><center><a href="http://www.harmy.me/pages/config.html">下一页：配置</a></center></p>

        </div>
    </div>

    <footer id="footer">
        <span>Copyright 2012 harmy.me</span><br />
        <a href="http://creativecommons.org/licenses/by/3.0/us/" rel="nofollow">Some Rights Reserved</a>
    </footer>
</div>



<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-34158001-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
</body>
</html>